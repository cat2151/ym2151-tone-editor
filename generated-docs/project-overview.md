Last updated: 2025-11-11

# Project Overview

## プロジェクト概要
- YM2151 (OPM) FM音源の音色パラメーターを編集するためのTUIエディタです。
- Windows互換のRust製アプリケーションで、ターミナル上で直感的な操作を提供します。
- Vimライクなキー操作で、音色の各種パラメーターを視覚的に調整できます。

## 技術スタック
- フロントエンド: `ratatui` (ターミナル上でリッチなユーザーインターフェースを構築するためのRust製TUIフレームワーク)
- 音楽・オーディオ: YM2151 (OPM) FMシンセシス (プロジェクトが対象とするヤマハ製のFM音源チップ技術)
- 開発ツール: Rust (高速かつ安全なシステムプログラミング言語)、`cargo` (Rustの公式ビルドシステム兼パッケージマネージャー)
- テスト: (情報なし)
- ビルドツール: `cargo` (Rustプロジェクトのビルド、テスト、ドキュメント生成などを管理するツール)
- 言語機能: Rust 1.70+ (プロジェクトのビルドに必要なRustコンパイラのバージョン)
- 自動化・CI/CD: (情報なし)
- 開発標準: (情報なし)
- ターミナル操作: `crossterm` (クロスプラットフォームでターミナル入出力やカーソル操作などを行うためのRustライブラリ)

## ファイル階層ツリー
```
📄 .gitignore
📄 Cargo.lock
📄 Cargo.toml
📄 LICENSE
📖 README.md
📄 _config.yml
📁 generated-docs/
📁 src/
  📄 main.rs
```

## ファイル詳細説明
- `.gitignore`: Gitバージョン管理システムが無視するファイルやディレクトリを指定する設定ファイルです。ビルド生成物や一時ファイルなどが含まれます。
- `Cargo.lock`: `Cargo.toml`で指定された依存関係が実際に解決された正確なバージョンとハッシュを記録するファイルです。これにより、異なる環境でも同じ依存関係のセットが使用されます。
- `Cargo.toml`: Rustプロジェクトのマニフェストファイルです。プロジェクト名、バージョン、著者、依存クレート、ビルド設定などのメタデータが記述されています。
- `LICENSE`: 本プロジェクトのライセンス情報が記載されています。これにより、プロジェクトの利用条件が明確になります。
- `README.md`: プロジェクトの概要、機能、ビルド方法、実行方法、操作方法、依存関係など、プロジェクトに関する包括的な情報が記述されたマークダウンファイルです。
- `_config.yml`: 主にGitHub Pagesなどで静的サイトを構築する際に使用される設定ファイルです。ドキュメントサイトのテーマやプラグインなどの設定を定義します。
- `generated-docs/`: プロジェクトから自動生成されたドキュメント（例えば、RustdocによるAPIドキュメントやGitHub Pages用のHTMLファイルなど）を格納するためのディレクトリです。
- `src/`: プロジェクトのソースコードを格納するメインディレクトリです。
- `src/main.rs`: プロジェクトのエントリポイントとなるRustのソースファイルです。アプリケーションの初期化、TUIの描画ロジック、イベント処理、状態管理など、主要な機能がここに実装されています。

## 関数詳細説明
- `main()`: アプリケーションのエントリポイントです。ターミナルの初期設定を行い、アプリケーションのメインロジックである`run_app`関数を呼び出し、終了時にターミナルを元の状態に戻す役割を担います。
- `run_app(terminal: &mut Terminal<CrosstermBackend<io::Stdout>>)`: アプリケーションのメインループを実行します。キーボードイベントの待機、UIの描画、イベントに応じた状態の更新を繰り返し行い、アプリケーションの終了イベントが発生するまで動作します。
- `ui(frame: &mut Frame, app_state: &AppState)`: 現在のアプリケーションの状態に基づいて、ターミナル上にユーザーインターフェースを描画します。YM2151パラメーターのテーブル、カーソル、操作説明などが表示されます。
- `handle_event(event: Event, app_state: &mut AppState)`: キーボード入力などのユーザーイベントを処理します。イベントの種類に応じて、カーソルの移動、パラメーター値の増減、アプリケーションの終了などの状態変更を行います。
- `update_state(app_state: &mut AppState, action: Action)`: `handle_event`によって決定されたアクションに基づき、アプリケーションの内部状態（例：選択中のパラメーター、パラメーターの値）を更新します。

## 関数呼び出し階層ツリー
```
main
└── run_app
    ├── ui
    └── handle_event
        └── update_state

---
Generated at: 2025-11-11 07:09:01 JST
