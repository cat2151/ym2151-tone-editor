Last updated: 2025-12-13

# Project Overview

## プロジェクト概要
- YM2151 FM音源の音色を編集する、Windows用のターミナルユーザーインターフェース（TUI）アプリケーションです。
- 音色パラメータの直感的な調整、リアルタイム音声プレビュー、および設定の自動セーブ機能を特徴としています。
- Rust言語で開発されており、効率的かつシンプルに音色を作成・管理できる体験を提供します。

## 技術スタック
- フロントエンド: **ratatui 0.28** (ターミナルUIフレームワーク), **crossterm 0.28** (クロスプラットフォームターミナル操作ライブラリ)
  - `ratatui`は、リッチなテキストベースのユーザーインターフェースを構築するためのフレームワークです。`crossterm`は、キーボード入力、マウスイベント、画面操作などのターミナル関連操作を抽象化し、クロスプラットフォームで利用可能にします。
- 音楽・オーディオ: **ym2151-log-play-server** (リアルタイム音声フィードバックライブラリ), **YM2151** (FM音源シミュレーション対象)
  - `ym2151-log-play-server`は、エディタで調整されたYM2151レジスタ値に基づいて、リアルタイムに音声を生成・再生するサーバーサイドのコンポーネントです。
- 開発ツール: **Rust 1.70 以降** (プログラミング言語), **Cargo** (Rustのビルドシステムおよびパッケージマネージャー)
  - プロジェクトはRust言語で書かれており、`Cargo`を使ってビルド、実行、依存関係の管理を行います。
- テスト: **Rustの標準テストフレームワーク**
  - 明示的なサードパーティ製テストライブラリの記述はありませんが、`src/tests`ディレクトリが存在するため、Rustの組み込みテスト機能が使用されていると推測されます。
- ビルドツール: **Cargo** (Rustのビルドシステム)
  - `cargo build --release`コマンドでプロジェクトの最適化されたバイナリを生成します。
- 言語機能: **Rust 1.70 以降**
  - プロジェクトの動作には特定のRust言語バージョンが必要です。
- 自動化・CI/CD: (特になし)
  - CI/CDツールに関する明示的な記述はありませんが、`Cargo`コマンドは自動化スクリプトに組み込みやすいです。
- 開発標準: (特になし)
  - コーディングスタイルや品質基準に関する具体的なツールやルールは明記されていませんが、Rustコミュニティの一般的なプラクティスに従っていると考えられます。

## ファイル階層ツリー
```
📄 .gitignore
📄 Cargo.lock
📄 Cargo.toml
📄 LICENSE
📖 README.ja.md
📖 README.md
📖 README_generate_gm_templates.md
📄 _config.yml
📁 docs/
  📖 KEYBINDS.ja.md
📄 generate_gm_templates.rs
📁 generated-docs/
🌐 googled947dc864c270e07.html
📁 issue-notes/
  📖 100.md
  📖 101.md
  📖 102.md
  📖 103.md
  📖 104.md
  📖 105.md
  📖 106.md
  📖 107.md
  📖 108.md
  📖 109.md
  📖 110.md
  📖 111.md
  📖 112.md
  📖 113.md
  📖 114.md
  📖 115.md
  📖 116.md
  📖 130.md
  📖 134.md
  📖 136.md
  📖 138.md
  📖 139.md
  📖 141.md
  📖 144.md
  📖 146.md
  📖 147.md
  📖 148.md
  📖 149.md
  📖 150.md
  📖 151.md
  📖 155.md
  📖 156.md
  📖 158.md
  📖 164.md
  📖 165.md
  📖 166.md
  📖 167.md
  📖 172.md
  📖 95.md
  📖 96.md
  📖 97.md
  📖 99.md
📁 src/
  📄 app.rs
  📄 app_init.rs
  📄 audio.rs
  📄 config.rs
  📄 file_ops.rs
  📄 main.rs
  📄 midi_conversion.rs
  📄 models.rs
  📄 register.rs
  📁 tests/
    📄 app_tests.rs
    📄 file_ops_tests.rs
    📄 midi_conversion_tests.rs
    📄 mod.rs
    📄 register_tests.rs
    📄 ui_tests.rs
    📄 variation_selector_tests.rs
    📄 verbose_logging_tests.rs
  📄 ui.rs
  📄 variation_selector.rs
📁 tones/
  📁 general_midi/
    📊 000_AcousticGrand.json
    📊 tone_names.json
📄 ym2151-tone-editor.toml.example
```

## ファイル詳細説明
- **`.gitignore`**: Gitが追跡しないファイルやディレクトリを指定する設定ファイルです。
- **`Cargo.lock`**: プロジェクトの依存関係の正確なバージョンを記録し、ビルドの再現性を保証します。
- **`Cargo.toml`**: Rustプロジェクトのメタデータ、依存クレート、ビルド設定などを定義するマニフェストファイルです。
- **`LICENSE`**: プロジェクトが配布される際のライセンス情報（著作権、利用条件など）が記述されています。
- **`README.ja.md`**, **`README.md`**: プロジェクトの目的、機能、使用方法、ビルド手順などについて説明する主要なドキュメントです（日本語版と英語版）。
- **`README_generate_gm_templates.md`**: General MIDIテンプレートの生成に関する補足説明や手順が記述されたドキュメントです。
- **`_config.yml`**: GitHub Pagesなどの静的サイトジェネレーターの設定ファイルとして使用される可能性があります。
- **`docs/KEYBINDS.ja.md`**: アプリケーションのキーバインド（操作キー）に関する詳細な情報を提供する日本語ドキュメントです。
- **`generate_gm_templates.rs`**: General MIDI音色テンプレートを生成するための補助的なRustスクリプトです。
- **`generated-docs/`**: 何らかのツールによって生成されたドキュメントを格納するためのディレクトリです。
- **`googled947dc864c270e07.html`**: Googleサイト認証や検証のために配置されることのある小さなHTMLファイルです。
- **`issue-notes/`**: 開発中に発生した課題、検討事項、メモなどを記録したMarkdownファイルをまとめたディレクトリです。
- **`src/app.rs`**: アプリケーションの中心的なロジックを管理するモジュールです。UIの状態、イベント処理、ユーザー操作への応答などが含まれます。
- **`src/app_init.rs`**: アプリケーションの起動時における初期設定やセットアップ処理を担うモジュールです。
- **`src/audio.rs`**: リアルタイム音声フィードバック機能に関連するロジックを扱います。外部の`ym2151-log-play-server`との通信や音声再生の制御などを行います。
- **`src/config.rs`**: アプリケーションの設定（キーバインドなど）を読み込み、管理するロジックが実装されています。
- **`src/file_ops.rs`**: 音色データのファイルからの読み込み（ロード）とファイルへの保存（セーブ）に関する操作を定義するモジュールです。
- **`src/main.rs`**: プロジェクトのエントリーポイントとなるファイルで、アプリケーションの起動処理を呼び出します。
- **`src/midi_conversion.rs`**: MIDI関連のデータ形式とYM2151レジスタデータとの間の変換ロジックを提供します。
- **`src/models.rs`**: YM2151のパラメータ、音色データ構造、アプリケーションの内部状態など、主要なデータモデルを定義するモジュールです。
- **`src/register.rs`**: YM2151のレジスタ（設定値）の読み書きや操作に関するロジックをカプセル化しています。
- **`src/tests/`**: プロジェクト内の各モジュールや機能に対する単体テストコードを格納するディレクトリです。
- **`src/ui.rs`**: ターミナルユーザーインターフェース（TUI）の描画ロジックを実装しています。`ratatui`クレートを利用して画面要素を構築します。
- **`src/variation_selector.rs`**: 音色バリエーションの選択や管理に関連する機能を提供するモジュールです。
- **`tones/general_midi/000_AcousticGrand.json`**: General MIDIの「000 Acoustic Grand Piano」に対応するYM2151音色データがJSON形式で記述されています。
- **`tones/general_midi/tone_names.json`**: 音色名やその関連情報が格納されている可能性のあるJSONファイルです。
- **`ym2151-tone-editor.toml.example`**: `ym2151-tone-editor`の設定ファイル例であり、ユーザーが独自のキーバインドなどを設定する際のテンプレートとして利用されます。

## 関数詳細説明
現時点では、個々の関数の詳細な情報（具体的な関数名、引数、戻り値など）はプロジェクト情報として提供されていません。しかし、ソースコードの各モジュールはその役割に応じた主要な機能を提供する関数群を含んでいます。

- **`app.rs` 関連関数**: アプリケーションのライフサイクル管理、ユーザー入力イベントの処理、およびそれに応じたUI状態の更新を制御する中心的な関数群です。
- **`audio.rs` 関連関数**: リアルタイム音声フィードバックサーバー（`ym2151-log-play-server`）との接続確立、レジスタデータの送信、および音色プレビューのトリガーに関する関数群です。
- **`file_ops.rs` 関連関数**: 音色データのファイルからの読み込み（ロード）とファイルへの保存（セーブ）を実行し、音色設定の永続化を管理する関数群です。
- **`ui.rs` 関連関数**: `ratatui`フレームワークを使用して、YM2151音色エディタの画面要素（パラメータ表示、カーソル、値など）をターミナルに描画する関数群です。
- **`config.rs` 関連関数**: アプリケーションの設定ファイル（例: キーバインド）の読み込みとパースを行う関数群です。
- **`register.rs` 関連関数**: YM2151の各レジスタ（DT, MUL, TLなど）の値を設定・取得し、有効な範囲内での値の増減を処理する関数群です。
- **`midi_conversion.rs` 関連関数**: MIDIメッセージとYM2151レジスタデータ間の変換ロジックを提供する関数群です。

## 関数呼び出し階層ツリー
```
関数呼び出し階層を分析するための情報が提供されていないため、表示できません。

---
Generated at: 2025-12-13 07:08:58 JST
