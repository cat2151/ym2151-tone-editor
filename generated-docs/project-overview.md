Last updated: 2025-11-23

# Project Overview

## プロジェクト概要
- YM2151 FM音源の音色を、ターミナル上で視覚的に編集するためのWindows向けTUIエディタです。
- Rustで実装されており、リアルタイムで音色パラメータを変更・再生し、効率的な音声フィードバックを提供します。
- シンプルな操作性と自動的なオーディオサーバー管理により、手軽にFM音源の音作りを楽しめます。

## 技術スタック
- フロントエンド: `ratatui` (ターミナルUIフレームワーク) を使用して、クロスプラットフォームなテキストユーザーインターフェースを構築し、YM2151のパラメータを視覚的に表示します。`crossterm` (クロスプラットフォームターミナル操作ライブラリ) は、ターミナルからの入力（キーボード、マウス）と出力（画面描画）を処理するために利用されます。
- 音楽・オーディオ: `ym2151-log-play-server` ライブラリの関数を利用し、YM2151音源のリアルタイム音声フィードバックを実現します。サーバーのインストール、起動、準備状況チェックは自動的に管理され、音色エディタから音色データやレジスタ書き込みコマンドを送信して音を生成します。
- 開発ツール: `Rust` は、本プロジェクトの主要なプログラミング言語です。堅牢性、安全性、パフォーマンスを重視して選ばれています。`cargo` はRustの公式ビルドシステム兼パッケージマネージャーであり、プロジェクトの依存関係管理、ビルド、実行、テストに使用されます。
- テスト: Rustの標準テストフレームワークが利用され、`src/tests`ディレクトリ配下に各モジュールの単体テストが記述されています。これにより、アプリケーションの各機能が意図通りに動作することを保証します。
- ビルドツール: `cargo` を使用して、ソースコードのコンパイル、依存関係の解決、実行可能ファイルの生成を行います。`cargo build --release` コマンドで最適化されたリリース版バイナリを生成します。
- 言語機能: Rustの強力な型システム、所有権モデル、トレイトベースのジェネリクスなど、モダンな言語機能が活用されています。これにより、メモリ安全性と並行処理の堅牢性が高められています。
- 自動化・CI/CD: 明示的なCI/CDパイプラインの記述はありませんが、`cargo`コマンドベースのビルドと実行手順は、スクリプト化による自動化の基礎となります。リアルタイム音声フィードバックのためのサーバー管理は、ライブラリの機能によって自動化されています。
- 開発標準: Rustコミュニティで一般的に推奨されるコーディングスタイルや慣習に従っていると推測されます。

## ファイル階層ツリー
```
📄 .gitignore
📄 Cargo.lock
📄 Cargo.toml
📄 LICENSE
📖 README.ja.md
📖 README.md
📄 _config.yml
📁 docs/
  📖 KEYBINDS.ja.md
📁 generated-docs/
📁 src/
  📄 app.rs
  📄 app_init.rs
  📄 audio.rs
  📄 config.rs
  📄 file_ops.rs
  📄 main.rs
  📄 midi_conversion.rs
  📄 models.rs
  📄 register.rs
  📁 tests/
    📄 app_tests.rs
    📄 file_ops_tests.rs
    📄 midi_conversion_tests.rs
    📄 mod.rs
    📄 register_tests.rs
    📄 ui_tests.rs
    📄 verbose_logging_tests.rs
  📄 ui.rs
📁 tones/
  📁 general_midi/
    📊 000_AcousticGrand.json
📄 ym2151-tone-editor.toml.example
```

## ファイル詳細説明
- **`.gitignore`**: Gitのバージョン管理システムに対し、追跡対象から除外するファイルやディレクトリのパターンを定義します。ビルド生成物や一時ファイルなどが含まれます。
- **`Cargo.lock`**: `Cargo.toml`に記述された依存クレートの、ビルド時に実際に使用されたバージョンを正確に記録します。これにより、異なる環境でも再現性のあるビルドが保証されます。
- **`Cargo.toml`**: Rustプロジェクトのメタデータ（プロジェクト名、バージョンなど）と、依存する外部ライブラリ（クレート）を定義する設定ファイルです。ビルド設定もここで行われます。
- **`LICENSE`**: 本プロジェクトのソフトウェアライセンス情報が記述されています。利用条件や配布条件を示します。
- **`README.ja.md`**: プロジェクトの日本語版説明書です。概要、機能、ビルド方法、実行方法、操作方法などが記載されています。
- **`README.md`**: プロジェクトの英語版説明書です。日本語版と同様の内容が英語で提供されます。
- **`_config.yml`**: GitHub Pagesなど、静的サイトジェネレーターの設定ファイルである可能性が高いです。ドキュメントサイトの構築に使用されます。
- **`docs/KEYBINDS.ja.md`**: アプリケーションのキーバインド（キー操作と機能の対応）に関する詳細な日本語ドキュメントです。
- **`generated-docs/`**: ビルドプロセスやツールによって自動生成されたドキュメントを格納するためのディレクトリです。
- **`src/app.rs`**: アプリケーションの主要なロジックを管理するモジュールです。UIの状態管理、ユーザー入力イベントの処理、音色パラメータの更新、オーディオフィードバック要求などを担当します。
- **`src/app_init.rs`**: アプリケーションの起動時に必要な初期化処理（ターミナル設定、初期音色データの読み込みなど）を行うモジュールです。
- **`src/audio.rs`**: YM2151サーバーとの通信を担当するモジュールです。音色データの送信、レジスタ書き込みコマンドの送信、サーバーの起動・停止など、オーディオ関連の低レベルな操作をカプセル化します。
- **`src/config.rs`**: アプリケーションの各種設定（キーバインド、デフォルトモードなど）を定義・管理するモジュールです。設定ファイルの読み書きも担当する可能性があります。
- **`src/file_ops.rs`**: ファイルシステム操作（音色データのJSONファイルとしての保存・読み込みなど）を扱うモジュールです。
- **`src/main.rs`**: Rustアプリケーションのエントリーポイントとなるファイルです。`app`モジュールを初期化し、イベントループを開始するなど、アプリケーション全体の起動シーケンスを制御します。
- **`src/midi_conversion.rs`**: MIDI関連の数値（例: MIDIノート番号）をYM2151が解釈できる周波数や他のパラメータに変換するロジックを扱うモジュールです。
- **`src/models.rs`**: アプリケーション内で使用されるデータ構造（例: YM2151音色データ、パラメータのレンジ定義）を定義するモジュールです。
- **`src/register.rs`**: YM2151音源のレジスタに関する操作（値の検証、ビットフィールドへの変換など）をカプセル化するモジュールです。
- **`src/tests/`**: プロジェクトの単体テストコードを格納するディレクトリです。各サブモジュールに対応するテストファイルが含まれます。
    - **`src/tests/app_tests.rs`**: `app.rs`モジュールの機能に関するテストコードです。
    - **`src/tests/file_ops_tests.rs`**: `file_ops.rs`モジュールのファイル操作機能に関するテストコードです。
    - **`src/tests/midi_conversion_tests.rs`**: `midi_conversion.rs`モジュールのMIDI変換機能に関するテストコードです。
    - **`src/tests/mod.rs`**: `tests`モジュールを定義するファイルで、他のテストファイルを宣言します。
    - **`src/tests/register_tests.rs`**: `register.rs`モジュールのYM2151レジスタ操作に関するテストコードです。
    - **`src/tests/ui_tests.rs`**: `ui.rs`モジュールのユーザーインターフェース描画に関するテストコードです。
    - **`src/tests/verbose_logging_tests.rs`**: 詳細なログ出力機能に関するテストコードである可能性があります。
- **`src/ui.rs`**: `ratatui`クレートを使用して、ターミナル上にYM2151音色エディタのインターフェースを描画するロジックを担当するモジュールです。
- **`tones/`**: プリセットやユーザーが保存した音色データを格納するためのルートディレクトリです。
- **`tones/general_midi/`**: General MIDI互換の音色データを格納するサブディレクトリです。
- **`tones/general_midi/000_AcousticGrand.json`**: General MIDIの000番「Acoustic Grand Piano」の音色データがJSON形式で保存されています。
- **`ym2151-tone-editor.toml.example`**: アプリケーションの設定ファイル例です。ユーザーがカスタム設定を行う際のテンプレートとして提供されます。

## 関数詳細説明
プロジェクト情報からは具体的な関数名を特定できなかったため、詳細な説明は提供できません。

## 関数呼び出し階層ツリー
```
関数呼び出し階層を分析できませんでした

---
Generated at: 2025-11-23 07:07:55 JST
