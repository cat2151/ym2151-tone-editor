Last updated: 2025-11-30

# Development Status

## 現在のIssues
- AR 1のslow attack音色で発生するエンベロープ継続問題 [Issue #115] の分析と対策案が提示されています。
- ALG7選択時のアプリクラッシュ [Issue #112] や、キーバインドによるパラメータ操作（例：[Issue #106]〜[Issue #111]）、カーソルジャンプのキーガイド表示 [Issue #114] といったUI/UX改善と安定性に関する複数の課題がオープンされています。
- `tone_names.json` の作成を通じてGM音色名管理を効率化する取り組み [Issue #116] が進行中で、ファイル自体は既に作成されています。

## 次の一手候補
1.  AR 1のslow attack音色エンベロープ継続問題の修正 [Issue #115]
    - 最初の小さな一歩: `src/midi_conversion.rs` 内でMIDIメッセージをJSONに変換する処理を特定し、`D2R=15` を追加するロジックの実装箇所を特定する。
    - Agent実行プロンプト:
      ```
      対象ファイル: `src/midi_conversion.rs`

      実行内容: Issue #115の分析内容に基づき、`src/midi_conversion.rs`において、key offのMIDIイベントを送信する前に `D2R=15` のレジスタ設定を追加し、key offの後に短い遅延 (例: 0.005秒) を挿入する修正の具体的な実装案を提案してください。現在のMIDIイベント送信ロジックとどのように統合するかをRustコードスニペットで示してください。

      確認事項: YM2151のレジスタ設定とMIDIイベントのシーケンス、特にD2Rレジスタの役割と設定値、および既存のJSON生成ロジックとの整合性を確認してください。遅延時間の設定が音色変化に与える影響も考慮してください。

      期待する出力: `src/midi_conversion.rs` の関連箇所を修正するためのRustコードスニペットと、修正の論理的な説明をmarkdown形式で出力してください。
      ```

2.  ALG7選択時のアプリクラッシュ問題の修正 [Issue #112]
    - 最初の小さな一歩: ALG7が選択された際に、UIの描画処理、特に仮想MIDI鍵盤のY座標計算とALG表示の高さに関する部分で、どのようにOutOfRangeが発生しうるかを`src/ui.rs`を中心にコードレベルで分析する。
    - Agent実行プロンプト:
      ```
      対象ファイル: `src/ui.rs`, `src/app.rs`

      実行内容: Issue #112で報告されている「ALG7選択時のアプリクラッシュ」について、`src/ui.rs`および`src/app.rs`内のUI描画ロジック、特にALG表示の高さ計算や仮想MIDI鍵盤のY座標計算に関連する部分を分析し、`out of range`エラーが発生する可能性のある箇所を特定してください。そして、その原因と具体的な修正案をRustコードスニペットで示してください。

      確認事項: ALG7の表示が他のALGとどのように異なるか、仮想MIDI鍵盤の描画範囲とALG表示領域の重なり、および全体のUIレイアウト計算に影響を与える可能性のある要素を確認してください。

      期待する出力: クラッシュの原因特定と、それを修正するためのRustコードスニペット、および修正内容の詳細な説明をmarkdown形式で出力してください。
      ```

3.  `tone_names.json` をアプリケーションにロードして利用する準備 [Issue #116]
    - 最初の小さな一歩: `tones/general_midi/tone_names.json` の内容を読み込み、アプリケーション内で音色名として利用するための最初のステップとして、`src/config.rs` または `src/models.rs` にそのデータをロードするメカニズムを設計する。
    - Agent実行プロンプト:
      ```
      対象ファイル: `src/config.rs`, `src/models.rs`, `tones/general_midi/tone_names.json`

      実行内容: `tones/general_midi/tone_names.json` ファイルをアプリケーション起動時に読み込み、その内容（GM音色名とMML文字列のペア）をRustのデータ構造（例：HashMapやVec<String>）に格納するための初期実装を提案してください。どのファイル（`src/config.rs`または`src/models.rs`）に読み込みロジックとデータ構造を配置するのが最も適切か、その理由とともに説明し、Rustコードスニペットで示してください。

      確認事項: `tone_names.json` のファイルパス、JSONの構造、およびアプリケーション内でこれらの音色名をどのように利用するかの将来的な計画（例：UI表示、音色生成時のデフォルト値）を考慮してください。アプリケーション起動時のパフォーマンスへの影響も検討してください。

      期待する出力: `tone_names.json` を読み込むためのRustコードスニペット、データの格納方法、およびそれらがアプリケーションのどの部分に影響を与えるかの説明をmarkdown形式で出力してください。
      ```

---
Generated at: 2025-11-30 07:08:07 JST
