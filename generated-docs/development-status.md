Last updated: 2025-12-03

# Development Status

## 現在のIssues
- [Issue #115](../issue-notes/115.md) は、AR 1のslow attack音色でエンベロープが継続する問題を解決するため、D2R=15によるkey offと短い遅延を導入する対策案が提示されています。
- [Issue #114](../issue-notes/114.md) は、A,D,S,Rキーなどカーソルジャンプ可能なUI要素の左隣に、対応するキー操作ガイドを表示するUX改善が計画されています。
- [Issue #100](../issue-notes/100.md) と [Issue #99](../issue-notes/99.md) は、それぞれCTRL+OによるGM000 json variationsのfzfを介した演奏・読み込み、およびCTRL+SによるGM000 jsonへの音色追記保存機能の検証を進める段階です。

## 次の一手候補
1. [Issue #115](../issue-notes/115.md): AR 1のslow attack音色でnoteをまたいでattack envelopeが継続される問題の修正
   - 最初の小さな一歩: `src/midi_conversion.rs` 内のMIDIメッセージ生成ロジックを分析し、D2R=15でのkey offと短い遅延を挿入する改修箇所の特定と、その実装方法を検討する。
   - Agent実行プロンプト:
     ```
     対象ファイル: `src/midi_conversion.rs`

     実行内容: `src/midi_conversion.rs` を分析し、[Issue #115](../issue-notes/115.md) で提案されている `attack envelope継続off` の対策案（D2R=15でのkey offと数msの遅延）を実装するために必要な変更点を洗い出し、具体的なコード修正案をmarkdown形式で出力してください。特に、key offの直前にD2R=15の送信を追加し、key off後の遅延を0.005秒とする変更箇所を特定してください。

     確認事項: YM2151の仕様（エンベロープの振幅維持、D2R=15の効果）と、既存のMIDIメッセージ生成ロジックとの整合性を確認してください。遅延時間 `0.005` 秒が妥当かどうかの検討も行ってください。

     期待する出力: 提案されるコード変更の差分（diff形式）と、変更理由、およびテストが必要なシナリオをmarkdown形式で出力してください。
     ```

2. [Issue #114](../issue-notes/114.md): カーソルジャンプ可能な項目へのキーガイド表示機能の追加
   - 最初の小さな一歩: `src/ui.rs` を分析し、現在カーソルがジャンプできる項目（A,D,S,Rなど）を特定し、それらの左隣にキーガイドを表示するためのUI描画ロジックの追加方法を検討する。
   - Agent実行プロンプト:
     ```
     対象ファイル: `src/ui.rs`

     実行内容: `src/ui.rs` を分析し、[Issue #114](../issue-notes/114.md) に基づき、A,D,S,Rキーなどのカーソルジャンプ可能なUI要素の隣に、対応するキーガイド（例: `[A]`）を表示する機能を追加するための具体的なUI描画ロジックの変更点をmarkdown形式で出力してください。現在ジャンプ可能な項目を列挙し、それぞれの描画位置と内容の提案を含めてください。

     確認事項: 既存のUIレイアウトを崩さないこと、キーガイドが常に表示されるわけではなく、特定のコンテキスト（例: 編集モード時）で表示されるべきかどうかの考慮、キーガイド表示によるパフォーマンスへの影響を確認してください。

     期待する出力: `src/ui.rs` における具体的なUI描画コードの修正案（diff形式）、およびキーガイド表示を有効/無効にする設定オプションの必要性に関する考察をmarkdown形式で出力してください。
     ```

3. [Issue #100](../issue-notes/100.md): CTRL+OでGM000 json variationsをfzfに与え、演奏・読み込みする機能の実装準備
   - 最初の小さな一歩: 現在のファイル読み込み処理 (`src/file_ops.rs` や `src/app.rs` など) を分析し、外部コマンド (`fzf`) を呼び出してファイル選択を行い、その結果をアプリケーションに渡すためのRust側のインターフェース設計を検討する。
   - Agent実行プロンプト:
     ```
     対象ファイル: `src/file_ops.rs`, `src/app.rs`, `src/main.rs`

     実行内容: `src/file_ops.rs`、`src/app.rs`、`src/main.rs` を分析し、[Issue #100](../issue-notes/100.md) に基づき、`CTRL+O` キーバインドで `fzf` を利用してファイルパスを選択し、そのパスに基づいて音色データを読み込む機能のための高レベルな設計と、変更が必要となる主要な関数や構造体をmarkdown形式で出力してください。特に、外部プロセス (`fzf`) の呼び出し、その出力の取得、およびアプリケーション内部でのパス処理と音色データ読み込みの連携方法に焦点を当ててください。

     確認事項: `fzf` のような外部コマンドをRustアプリケーションから安全に実行する方法（標準入出力のハンドリング、エラー処理）、ファイル選択後の音色データ解析（GM000 json variationsの構造）、および既存のファイル操作ロジックとの整合性を確認してください。

     期待する出力: `fzf` 連携のための新しいモジュールや関数の提案、既存ファイルに対する変更箇所の概要、および`fzf`の実行と結果処理のフローチャートをmarkdown形式で出力してください。

---
Generated at: 2025-12-03 07:08:33 JST
