Last updated: 2025-11-25

# Development Status

## 現在のIssues
- [Issue #115](../issue-notes/115.md): AR 1のslow attack音色でattack envelopeが連続する問題を、D2Rとkey offタイミング調整で解決します。
- [Issue #112](../issue-notes/112.md): ALG7選択時にアプリがクラッシュするバグについて、ALG表示高さと仮想MIDI鍵盤のY座標計算の不備を調査し修正します。
- [Issue #114](../issue-notes/114.md): カーソルジャンプ可能なUI項目の左隣に、対応するキーバインドガイドを表示する機能を追加します。

## 次の一手候補
1.  [Issue #115](../issue-notes/115.md): AR 1のslow attack音色でattack envelopeが継続される問題の修正に着手する
    -   最初の小さな一歩: 既存のYM2151 MIDI送信ロジック（`src/midi_conversion.rs`など）を分析し、JSON出力のどこでenvelope関連のパラメータを制御しているか、およびkey offのタイミングを特定する。
    -   Agent実行プロンプト:
        ```
        対象ファイル: `src/midi_conversion.rs`, `tones/general_midi/000_AcousticGrand.json`

        実行内容: `src/midi_conversion.rs` 内でYM2151へのMIDI送信時にJSONデータを生成・送信している部分を特定し、特にkey off処理とエンベロープパラメータ（D2Rなど）がどのように扱われているかを分析してください。また、`tones/general_midi/000_AcousticGrand.json`の構造を参考に、エンベロープ制御に関する既存のJSONフォーマットを調査してください。

        確認事項: `src/midi_conversion.rs`の関連関数（例: `send_midi_message`や`generate_tone_json`のようなもの）とその呼び出し箇所、および既存のJSON定義との整合性を確認してください。D2Rや他のエンベロープパラメータがMIDIメッセージにどのようにマッピングされているかを理解することが重要です。

        期待する出力: `src/midi_conversion.rs`におけるkey off処理とエンベロープパラメータの扱い、およびJSONデータ構造における関連部分について、Markdown形式で詳細に分析結果を出力してください。特に、D2R=15の追加とkey off後の時間調整を行うための変更点を具体的に提案してください。
        ```

2.  [Issue #112](../issue-notes/112.md): ALG7を選ぶとアプリが落ちる問題の原因調査と修正に着手する
    -   最初の小さな一歩: `src/ui.rs`と`src/app.rs`を調査し、ALG表示ロジックと仮想MIDI鍵盤の描画ロジックがどのように連携しているか、特にALG7選択時の描画範囲計算とUI要素の配置方法を確認する。
    -   Agent実行プロンプト:
        ```
        対象ファイル: `src/ui.rs`, `src/app.rs`

        実行内容: `src/ui.rs` と `src/app.rs` を分析し、ALG（アルゴリズム）の描画ロジックと仮想MIDI鍵盤の描画ロジックを特定してください。特に、ALGが変更された際にUI要素の高さや配置がどのように再計算・調整されているか、また仮想MIDI鍵盤のY座標が画面範囲内に収まるようにどのように描画されているかを調査し、ALG7選択時に問題が発生しそうな箇所を特定してください。

        確認事項: ALGの表示領域計算、UI要素（特にMIDI鍵盤）のY座標の計算、および描画処理における境界条件のチェックが行われているかを確認してください。`egui`などのUIライブラリの利用方法も考慮に入れてください。

        期待する出力: ALG7選択時にアプリがクラッシュする原因として考えられる、ALG表示heightの計算ミスや仮想MIDI鍵盤のY座標の範囲外アクセスに関する具体的なコード箇所とその修正案をMarkdown形式で出力してください。
        ```

3.  [Issue #114](../issue-notes/114.md): カーソルジャンプ可能な項目の左隣に、押すキーのガイドを表示する機能に着手する
    -   最初の小さな一歩: `src/ui.rs`を調査し、カーソルジャンプ可能なUI要素（A,D,S,Rなど）がどのように描画され、対応するキー入力がどのように処理されているかを確認する。既存のキーバインド設定の仕組みも理解する。
    -   Agent実行プロンプト:
        ```
        対象ファイル: `src/ui.rs`, `src/config.rs`, `docs/KEYBINDS.ja.md`

        実行内容: `src/ui.rs`を分析し、A,D,S,Rなどのパラメータが表示されている箇所と、それらへのカーソルジャンプや値変更を行うキー入力処理を特定してください。`src/config.rs`を参照してキーバインドがどのように定義されているかを確認し、`docs/KEYBINDS.ja.md`に記載されているキーバインド情報との整合性を確認してください。その後、カーソルジャンプ可能な各UI要素の左隣に、対応するキー操作ガイド（例: "A"）を表示するためのUI描画ロジックの追加案を検討してください。

        確認事項: 既存のUI要素の描画ロジックに影響を与えないように、新しいテキスト要素をどのように追加するか、また、キーガイドの表示位置やスタイルが既存のUIと調和するかを確認してください。キーバインドが動的に変更される可能性も考慮に入れてください。

        期待する出力: `src/ui.rs`内でカーソルジャンプ可能なUI要素の隣にキーガイドを表示するための具体的なコード修正案と、その実装に必要な描画ロジックの詳細をMarkdown形式で出力してください。キーバインドの情報を取得し、それをUIに反映させる方法を含めてください。
        ```

---
Generated at: 2025-11-25 07:08:11 JST
