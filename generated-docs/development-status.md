Last updated: 2025-11-11

# Development Status

## 現在のIssues
- [Issue #5](../issue-notes/5.md) は、アプリケーション起動時にカレントディレクトリから最新のJSONファイルを音色データとして読み込み、表示に反映させる仮仕様の実装が課題です。
- [Issue #4](../issue-notes/4.md) は、ESCキーでの終了時に、現在の音色データを`ym2151-log-play-server`のフォーマットに合わせたJSONファイルとして保存する仮仕様の実装が進行中です。
- [Issue #2](../issue-notes/2.md) は、ユーザーが数値を増減させた際に、その変更を反映したMMLを引数として子プロセスで`cat-play-mml`コマンドを呼び出す機能の実装が求められています。

## 次の一手候補
1. [Issue #5](../issue-notes/5.md) 起動時にJSONから音色データを読み込む機能の骨子を実装
   - 最初の小さな一歩: `src/main.rs`に、カレントディレクトリ内のJSONファイルをリストし、ファイル名またはタイムスタンプに基づいて最新のファイルを特定する処理を追加する。
   - Agent実行プロンプト:
     ```
     対象ファイル: `src/main.rs`

     実行内容: `src/main.rs`に、指定されたディレクトリ（カレントディレクトリ）内のJSONファイルを検索し、ファイル名または更新日時を基に最新のJSONファイルを特定し、そのパスを返す関数`find_latest_json_file`を実装してください。エラーハンドリングを含めてください。

     確認事項: Rustの標準ライブラリ（`std::fs`、`std::path`）でのファイル操作の慣習、エラーハンドリングのベストプラクティスを確認してください。既存のアプリケーション構造に適合するように設計してください。

     期待する出力: `src/main.rs`に`find_latest_json_file`関数が追加され、簡単なテストコードでその機能が確認できるRustコード。
     ```

2. [Issue #4](../issue-notes/4.md) 終了時に音色データをJSONで保存する機能の骨子を実装
   - 最初の小さな一歩: `src/main.rs`に、現在の音色データ構造（仮定義で良い）を`ym2151-log-play-server`が期待するJSON形式の文字列にシリアライズする関数を作成する。
   - Agent実行プロンプト:
     ```
     対象ファイル: `src/main.rs`

     実行内容: `src/main.rs`に、アプリケーション内で使用される音色データを表現する仮のRust構造体（例: `struct ToneData { /* ... */ }`）を定義し、そのインスタンスを`ym2151-log-play-server`のフォーマットに合わせたJSON文字列に変換する関数`serialize_tone_data_to_json`を実装してください。`serde`クレートとその`derive`マクロを利用することを検討してください。

     確認事項: `ym2151-log-play-server`が期待する具体的なJSONスキーマ（例としてシンプルなキー/値ペアを想定）、`serde`クレートの利用方法、およびシリアライズ時のエラーハンドリングについて確認してください。

     期待する出力: `src/main.rs`に`ToneData`構造体と`serialize_tone_data_to_json`関数が追加され、ダミーデータでJSON文字列への変換が成功することを示すRustコード。
     ```

3. [Issue #2](../issue-notes/2.md) 数値増減時に`cat-play-mml`を呼び出す機能の骨子を実装
   - 最初の小さな一歩: `src/main.rs`に、引数としてMML文字列を受け取り、`cat-play-mml`コマンドを子プロセスとして実行する基本的なラッパー関数を作成する。
   - Agent実行プロンプト:
     ```
     対象ファイル: `src/main.rs`

     実行内容: `src/main.rs`に、引数としてMML文字列を受け取り、そのMML文字列を`cat-play-mml`コマンドの標準入力または引数として渡して実行する関数`execute_cat_play_mml`を実装してください。Rustの`std::process::Command`を使用してください。コマンド実行の成功/失敗をログに出力する機能を含めてください。

     確認事項: `cat-play-mml`コマンドがシステムパスから実行可能であること、コマンドの引数としてMMLを渡す適切な方法、および子プロセス実行時のエラー（コマンドが見つからない、実行失敗など）に対する適切なハンドリング方法を確認してください。

     期待する出力: `src/main.rs`に`execute_cat_play_mml`関数が追加され、簡単なテストMML文字列でコマンド実行をシミュレートするRustコード。

---
Generated at: 2025-11-11 07:09:09 JST
